<!DOCTYPE html>
<html>
<head>
    <title>Обрезка аудио</title>
</head>
<body>
    <h1>Обрезка аудио</h1>
    <input type="file" id="audioFile" accept="audio/*">
    <button onclick="playAudio()">Воспроизвести</button>
    <button onclick="stopAudio()">Остановить</button>
    <button onclick="trimAudio()">Обрезать</button>
    <audio id="audioPlayer" controls></audio>

    <script>
        let audioFile;
        let audioPlayer = document.getElementById('audioPlayer');
        let audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let source;
        let startTime = 0;
        let endTime = 0;

        document.getElementById('audioFile').addEventListener('change', function(e) {
            audioFile = e.target.files[0];
            audioPlayer.src = URL.createObjectURL(audioFile);
        });

        function playAudio() {
            source = audioContext.createBufferSource();
            let reader = new FileReader();
            reader.onload = function(e) {
                audioContext.decodeAudioData(e.target.result, function(buffer) {
                    source.buffer = buffer;
                    source.connect(audioContext.destination);
                    source.start(audioContext.currentTime, startTime, endTime - startTime);
                });
            };
            reader.readAsArrayBuffer(audioFile);
        }

        function stopAudio() {
            if (source) {
                source.stop();
            }
        }

        function trimAudio() {
            startTime = audioPlayer.currentTime;
            endTime = startTime + 10; // Обрезать 10 секунд аудио
        }
    </script>
</body>
</html>
